<%layout('./layout/content')%>
<div class="login-box">
  <%if(errors.length) {%>
  <div id="error" class="alert alert-danger">
    <%errors.forEach(function(error){%>
    <p><%=error%></p>
    <%});%>
  </div>
  <%}%>
  <!-- login form -->
  <form action="<%=module%>/register" method="post" class="sky-form boxed">
    <header><i class="fa fa-users"></i> Create an account</header>
    <fieldset>
      <section>
        <label class="label">Login</label>
        <label class="input">
          <i class="icon-append fa fa-user"></i>
          <input id="username" type="login" name="username">
        </label>
      </section>

      <section>
        <label class="label">Password</label>
        <label class="input">
          <i class="icon-append fa fa-lock"></i>
          <input id="password" type="password" name="password">
        </label>
      </section>

      <section>
        <label class="label">Repeat password</label>
        <label class="input">
          <i class="icon-append fa fa-lock"></i>
          <input id="password2" type="password" name="password2">
        </label>
      </section>

      <%Object.keys(fields).forEach(function(fieldName){%>
      <section>
        <label class="label">
          <%=fields[fieldName].caption ? fields[fieldName].caption : fieldName%>
          <%=fields[fieldName].required ? '*' : ''%>
        </label>
        <label class="input">
          <%if (Array.isArray(fields[fieldName])) {%>
          <select name="<%=fieldName%>">
            <%for (let option of fields[fieldName]){%>
            <option value="<%=option.value%>"><%=option.key%></option>
            <%}%>
          </select>
          <%} else if (fields[fieldName]){%>
          <input type="text" name="<%=fieldName%>" class="input" <%if (fields[fieldName].required) {%>required
            <%}%>
          />
          <%}%>
        </label>
      </section>
      <%})%>
    </fieldset>

    <footer>
      <button id="authbutton" type="submit" class="btn btn-primary pull-right">Create an account</button>
      <div class="forgot-password pull-left">
        <a href="<%=module%>/auth"><b>Log in</b></a>
      </div>
    </footer>
  </form>
</div>